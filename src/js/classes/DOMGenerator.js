import{Templategenerator as e}from"../Aggregator.js";import{Datamanager as t}from"../Aggregator.js";import{Validator as n}from"../Aggregator.js";import{Timemanager as a}from"../Aggregator.js";import{Lang as i}from"../Aggregator.js";import{Transaction as r,Multitransaction as s}from"../Aggregator.js";export class DOMGenerator{constructor(){this.tGen=new e,this.vali=new n,this.dMan=new t,this.tMan=new a,this.Lang=new i}listener_deleteTransactions(){document.querySelectorAll(".delete-trans-button").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.getAttribute("mt_ident");this.dMan.delete_transaction(t,this.tMan.get_monthId()),this.dMan.saveData(),this.render_detailView()})})}render_detailView(){this.clearDOM();let e=document.querySelector("main");e.append(this.tGen.render_breadCrump());document.getElementById("bread-crump-container").addEventListener("click",this.render_dashboard.bind(this)),e.append(this.tGen.render_textElement("h3",this.Lang.lang("Detailansicht"),["underlined","flex-item-left"])),e.append(this.tGen.render_textElement("h4",this.Lang.lang("Transaktionen"),["underlined","flex-item-left"])),e.append(this.tGen.render_transWrapper(this.tMan.get_todaysMonthName(),this.tMan.get_todaysFullYear())),this.tGen.refresh_transBody(this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].runningTransactions,this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].months[this.dMan.get_indexOfMonthId(this.tMan.get_monthId())]),this.listener_deleteTransactions()}render_accounts(){this.clearDOM();let e=document.querySelector("main"),t=[];this.dMan.mydata.trackeraccounts.forEach(e=>{t.push(e.name)}),e.append(this.tGen.render_breadCrump()),e.append(this.tGen.render_textElement("h3","Trackeraccounts",["underlined","flex-item-left"])),e.append(this.tGen.render_textElement("h4","\xdcbersicht",["underlined","flex-item-left"])),e.append(this.tGen.render_accountWrapper()),this.tGen.refresh_accountWrapper(t,this.dMan.mydata.activeTrackeraccount),e.append(this.tGen.render_textElement("h4","Neuer Trackeraccount",["underlined","flex-item-left"])),e.append(this.tGen.render_inputBlock("username-input","Accountname...","Name eingeben","create-new-tracker-account-button")),this.listener_accounts()}listener_accounts(e){if(!e){document.getElementById("bread-crump-container").addEventListener("click",this.render_dashboard.bind(this));document.getElementById("create-new-tracker-account-button").addEventListener("click",()=>{this.animateInputButton("additional-username","username-input","create-new-tracker-account-button")})}let t=document.querySelectorAll(".accounts-p-holder input");t.forEach(e=>{e.addEventListener("click",()=>{let t=e.previousElementSibling.innerText;this.dMan.set_newActiveAccount(t)})});let n=t.length;document.querySelectorAll(".delete-acc-button").forEach(e=>{e.addEventListener("click",()=>{var t;if(n>1){let a=(null===(t=e.parentElement)||void 0===t?void 0:t.previousElementSibling).querySelector("p").innerText;this.dMan.delete_trackerAccount(a);let i=[];this.dMan.mydata.trackeraccounts.forEach(e=>{i.push(e.name)}),this.tGen.refresh_accountWrapper(i,this.dMan.mydata.activeTrackeraccount),this.listener_accounts(!1)}})});document.getElementById("username-input").addEventListener("focus",()=>{this.resetInputButton("username-input","create-new-tracker-account-button")})}render_categories(){this.clearDOM();let e=document.querySelector("main"),t=this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories.length;e.append(this.tGen.render_breadCrump()),e.append(this.tGen.render_textElement("h3",this.Lang.lang("Kategorien"),["underlined","flex-item-left"]));let n=this.tGen.render_textBlock(),a=this.tGen.render_textElement("p",this.Lang.lang("Indem du deinen Ausgaben Kategorien zuweist, erm\xf6glichst du dir einen besseren \xdcberblick. L\xf6sche oder erstelle hier neue Kategorien"));n.append(a),e.append(n),e.append(this.tGen.render_textElement("h4","\xdcbersicht",["underlined","flex-item-left"])),e.append(this.tGen.render_categoryWrapper(this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories)),e.append(this.tGen.render_textElement("h4","Neue Kategorie",["underlined","flex-item-left"])),e.append(this.tGen.render_inputBlock("catName-input","Kategorienname...","Kategorie eingeben","create-new-category-button")),this.listener_categories(t)}listener_categories(e){e>0&&document.querySelectorAll(".delete-cat-button").forEach(e=>{e.addEventListener("click",()=>{var t;let n=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement,a=null==n?void 0:n.querySelector("p");this.dMan.delete_category(a.innerText),n.remove()})});document.getElementById("bread-crump-container").addEventListener("click",this.render_dashboard.bind(this));let t=document.getElementById("create-new-category-button");null==t||t.addEventListener("click",()=>{this.animateInputButton("category","catName-input","create-new-category-button")});document.getElementById("catName-input").addEventListener("focus",()=>{this.resetInputButton("catName-input","create-new-category-button")})}render_repeatingMenu(){this.clearDOM();let e;e=0!==this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories.length;let t=document.querySelector("main");if(t.append(this.tGen.render_breadCrump()),e){t.append(this.tGen.render_textElement("h3","Laufenden Betrag hinzuf\xfcgen",["underlined","flex-item-left"])),t.append(this.tGen.render_textElement("h4","Art",["underlined","flex-item-left"])),t.append(this.tGen.render_radioBoxes(["output-transaction","input-transaction"],[this.Lang.lang("Ausgabe"),this.Lang.lang("Einnahme")],"kind-of-transaction")),t.append(this.tGen.render_textElement("h4","Abgerechnet einmal..",["underlined","flex-item-left"])),t.append(this.tGen.render_regularityWrapper());document.getElementById("monthly-pay").checked=!0,t.append(this.tGen.render_textElement("h4","Kategorie",["underlined","flex-item-left"]));let n=this.tGen.render_element("div",["box"]);t.append(n);let a=this.tGen.render_select(this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories,["category-picker","clickable","flex-start"],["category-picker"]);n.append(a),t.append(this.tGen.render_textElement("h4","Betrag",["underlined","flex-item-left"])),t.append(this.tGen.render_inputBlock("amount-input","Betrag eingeben","Betrag eingeben","create-new-transaction-button")),this.dMan.set_multiTrans("type","expense"),this.dMan.set_multiTrans("due","month"),this.dMan.set_multiTrans("category",a.value)}else t.append(this.tGen.render_importantInfo("Um Ein- und Ausgaben zu erstellen, gehe zur\xfcck ins Dashboard und erstelle eine oder mehrere Kategorien"));this.listener_newTransaction("repeating",e)}render_singleMenu(){this.clearDOM();let e;e=0!==this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories.length;let t=document.querySelector("main");if(t.append(this.tGen.render_breadCrump()),e){t.append(this.tGen.render_textElement("h3",this.Lang.lang("Einmaligen Betrag hinzuf\xfcgen"),["underlined","flex-item-left"])),t.append(this.tGen.render_textElement("h4",this.Lang.lang("Art"),["underlined","flex-item-left"])),t.append(this.tGen.render_radioBoxes(["output-transaction","input-transaction"],[this.Lang.lang("Ausgabe"),this.Lang.lang("Einnahme")],"kind-of-transaction")),t.append(this.tGen.render_textElement("h4",this.Lang.lang("Datum"),["underlined","flex-item-left"])),t.append(this.tGen.render_radioBoxes(["set-todays-date","set-specific-date"],[this.Lang.lang("Heute"),this.Lang.lang("Am...")],"date-time-radios","marker-for-picker")),t.append(this.tGen.render_textElement("h4","Kategorie",["underlined","flex-item-left"]));let n=this.tGen.render_element("div",["box"]);t.append(n);let a=this.tGen.render_select(this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories,["category-picker","clickable","flex-start"],["category-picker"]);n.append(a),t.append(this.tGen.render_textElement("h4","Betrag",["underlined","flex-item-left"]));let i=this.tGen.render_inputBlock("amount-input","Betrag eingeben","Betrag eingeben","create-new-transaction-button");t.append(i),this.dMan.set_singleTrans("type","expense"),this.dMan.set_singleTrans("date",this.tMan.get_full_date()),this.dMan.set_singleTrans("category",a.value)}else t.append(this.tGen.render_importantInfo(this.Lang.lang("Um Ein- und Ausgaben zu erstellen, gehe zur\xfcck ins Dashboard und erstelle eine oder mehrere Kategorien")));this.listener_newTransaction("single",e)}update_datepickerBody(e,t,n){let a=0,i=0,r=document.getElementById("dPicker-body"),s=document.querySelector("#dPicker-head h3");switch(e){case"pre":t-1<0?(a=11,i=n-1):(a=t-1,i=n);break;case"next":t+1>11?(a=0,i=n+1):(a=t+1,i=n);break;case"today":a=t,i=n}let d=this.tMan.get_totalMonthDays(a,i);document.querySelectorAll(".week-row").forEach(e=>{e.remove()}),this.tGen.render_dPickerBody(d,r,this.tMan.get_FirstWeekday(this.tMan.months[a],i),this.tMan.get_totalMonthWeeks(d,this.tMan.months[a],i)),s.innerText=`${this.Lang.lang(this.tMan.months[a])} ${i}`,this.markToday(this.tMan.get_DateFromPickerHeadline(s.innerText)[1],this.tMan.months[this.tMan.get_DateFromPickerHeadline(s.innerText)[0]])}markToday(e,t){var n;let a=0;if(e===new Date().getFullYear()&&t===this.tMan.months[new Date().getMonth()]){let i=document.querySelectorAll(".day-field-number");for(let r=0;r<i.length;r++){let s=i[r];""!==s.innerText&&(a=+s.innerText)===new Date().getDate()&&(null===(n=s.parentElement)||void 0===n||n.classList.add("its-today"))}}}listener_datePicker(){let e=document.querySelector("#dPicker-head h3"),t=this.tMan.get_DateFromPickerHeadline(e.innerText)[0],n=this.tMan.get_DateFromPickerHeadline(e.innerText)[1],a=document.getElementById("btn-pre-month"),i=document.getElementById("btn-next-month"),r=document.querySelector(".dPicker-todays-date-button");a.addEventListener("click",()=>{n=this.tMan.get_DateFromPickerHeadline(e.innerText)[1],this.update_datepickerBody("pre",t,n),this.dMan.set_singleTrans("date",null),t=this.tMan.get_DateFromPickerHeadline(e.innerText)[0],this.listener_dPicker_dayfields()}),i.addEventListener("click",()=>{n=this.tMan.get_DateFromPickerHeadline(e.innerText)[1],this.update_datepickerBody("next",t,n),this.dMan.set_singleTrans("date",null),t=this.tMan.get_DateFromPickerHeadline(e.innerText)[0],this.listener_dPicker_dayfields()}),r.addEventListener("click",()=>{this.update_datepickerBody("today",new Date().getMonth(),new Date().getFullYear()),this.dMan.set_singleTrans("date",null),this.listener_dPicker_dayfields()}),this.listener_dPicker_dayfields()}listener_dPicker_dayfields(){let e=document.querySelectorAll(".day-field");e.forEach(t=>{t.addEventListener("click",n=>{let a=t.children[0];if(""!==a.innerText){e.forEach(e=>{e.classList.remove("date-picked")}),t.classList.add("date-picked");let i=document.querySelector("#dPicker-head h3"),r=[+a.innerText];r.push(...this.tMan.get_DateFromPickerHeadline(i.innerText)),this.dMan.set_singleTrans("date",this.tMan.get_full_date(r))}})})}listener_newTransaction(e,t){if(t){let n=document.getElementById("output-transaction"),a=document.getElementById("input-transaction"),i=document.getElementById("set-todays-date"),r=document.getElementById("set-specific-date"),s=document.getElementById("amount-input"),d=document.getElementById("create-new-transaction-button"),l=document.getElementById("category-picker");if("repeating"===e){let c=e=>{let t=e.target.getAttribute("id");switch(t){case"monthly-pay":this.dMan.set_multiTrans("due","month");break;case"weekly-pay":this.dMan.set_multiTrans("due","week");break;case"quarterly-pay":this.dMan.set_multiTrans("due","quarter");break;case"hYear-pay":this.dMan.set_multiTrans("due","halfyear");break;case"yearly-pay":this.dMan.set_multiTrans("due","year")}},o=document.getElementById("monthly-pay"),h=document.getElementById("weekly-pay"),u=document.getElementById("quarterly-pay"),m=document.getElementById("hYear-pay"),p=document.getElementById("yearly-pay");o.addEventListener("input",c),h.addEventListener("input",c),u.addEventListener("input",c),m.addEventListener("input",c),p.addEventListener("input",c)}let g=()=>{switch(n.checked){case!0:"single"===e?this.dMan.set_singleTrans("type","expense"):this.dMan.set_multiTrans("type","expense");break;case!1:"single"===e?this.dMan.set_singleTrans("type","earning"):this.dMan.set_multiTrans("type","earning")}};n.addEventListener("input",g),a.addEventListener("input",g);let k=()=>{let e=document.getElementById("marker-for-picker"),t=document.getElementById("date-picker-wrapper");switch(i.checked){case!0:this.dMan.set_singleTrans("date",this.tMan.get_full_date()),t&&t.remove();break;case!1:if(this.dMan.set_singleTrans("date",null),!t){let n=this.tMan.get_todaysMonthName(),a=this.tMan.get_todaysFullYear(),r=this.tGen.render_datepicker(n,a.toString(),this.tMan.get_totalMonthDays(),this.tMan.get_FirstWeekday(n,a),this.tMan.get_totalMonthWeeks(this.tMan.get_totalMonthDays(),n,a));e.insertAdjacentElement("afterend",r);let s=document.querySelector("#dPicker-head h3");this.markToday(this.tMan.get_DateFromPickerHeadline(s.innerText)[1],this.tMan.months[this.tMan.get_DateFromPickerHeadline(s.innerText)[0]])}this.listener_datePicker()}};"single"===e&&(i.addEventListener("input",k),r.addEventListener("input",k)),s.addEventListener("focus",()=>{this.resetInputButton("amount-input","create-new-transaction-button")}),d.addEventListener("click",()=>{"single"===e?this.animateInputButton("amount","amount-input","create-new-transaction-button"):this.animateInputButton("repeatingAmount","amount-input","create-new-transaction-button")}),l.addEventListener("change",()=>{"single"===e?this.dMan.set_singleTrans("category",l.value):this.dMan.set_multiTrans("category",l.value)})}document.getElementById("bread-crump-container").addEventListener("click",this.render_dashboard.bind(this))}listener_dashboard(){let e=document.getElementById("dashboard-body"),t=null==e?void 0:e.querySelector("button");null==t||t.addEventListener("click",()=>{this.render_detailView()})}render_dashboard(){this.clearDOM(),this.dMan.reset_singleTrans(),this.dMan.reset_multiTrans();let e=document.querySelector("main");if(e.append(this.tGen.render_welcomeHeadline(this.tMan.get_db_headline_partOfDay(),this.dMan.mydata.activeTrackeraccount,this.tMan.get_db_headline_weekday(),this.tMan.get_full_date(),this.tMan.get_calendarweek())),this.dMan.monthId_existent(this.tMan.get_monthId())){if(this.dMan.monthId_existent(this.tMan.get_monthId())&&0===this.dMan.get_monthEntriesFromId(this.tMan.get_monthId())){let t=this.tGen.render_element("div",["text-block","flex-column"]),n=this.tGen.render_textElement("p","F\xfcr diesen Monat existieren noch keine Daten. F\xfcge unten im Men\xfc Ein- und Ausgaben hinzu");t.append(n),e.append(t)}else this.dMan.monthId_existent(this.tMan.get_monthId())&&this.dMan.get_monthEntriesFromId(this.tMan.get_monthId())>0&&e.append(this.tGen.render_dashboardHolder(this.dMan,this.tMan.get_monthId(),this.dMan.monthArrayOfWho(),this.tMan.get_totalMonthDays()))}else{this.dMan.createNewMonth(this.tMan.get_monthId()),this.dMan.saveData();let a=this.tGen.render_element("div",["text-block","flex-column"]),i=this.tGen.render_textElement("p","F\xfcr diesen Monat existieren noch keine Daten. F\xfcge unten im Men\xfc Ein- und Ausgaben hinzu");a.append(i),e.append(a)}e.append(this.tGen.render_starMenu()),this.listener_starMenu(),this.listener_dashboard()}render_firstOpening(){let e=document.querySelector("main");if(e.hasAttribute("id"))switch(e.getAttribute("id")){case"fOpen1":this.clearDOM(),e.append(this.tGen.render_masterHeadline());let t=this.tGen.render_element("div",["text-block","flex-column"]),n=this.tGen.render_textElement("p",this.Lang.lang("Du willst einen besseren \xdcberblick \xfcber deine Finanzen, zu jederzeit und \xfcberall?"));t.append(n);let a=this.tGen.render_element("div",["text-block","flex-column"]),i=this.tGen.render_textElement("p",this.Lang.lang("Du willst vielleicht nicht nur deine Finanzen tracken, sondern auch die deiner Kinder/Freunde/Firma etc.?"));a.append(i);let r=this.tGen.render_element("div",["text-block","flex-column"]),s=this.tGen.render_textElement("p",this.Lang.lang("Dann brauchst du nicht weiter nach einem guten Tracker zu suchen. Moneytracker hilft dir bei allem, was du daf\xfcr brauchst"));r.append(s),e.append(t),e.append(a),e.append(r);let d=this.tGen.render_element("div",["circle-shapes","next-button","buttons","clickable"],["first-time-open-next-button"]);e.append(d),e.id="fOpen2";break;case"fOpen2":this.clearDOM(),e.append(this.tGen.render_masterHeadline());let l=this.tGen.render_element("div",["text-block","flex-column"]),c=this.tGen.render_textElement("p",this.Lang.lang("Auf dieser Seite werden keine Cookies verwendet, geschweigedenn Daten an Dritte weitergegeben"));l.append(c);let o=this.tGen.render_element("div",["text-block","flex-column"]),h=this.tGen.render_textElement("p",this.Lang.lang("Der Moneytracker ist eine von vielen Referenzarbeiten, die all deine Daten im localStorage deines pers\xf6nlichen Ger\xe4tes und Browsers speichert"));o.append(h);let u=this.tGen.render_element("div",["text-block","flex-column"]),m=this.tGen.render_textElement("p",this.Lang.lang("Da der localStorage nicht nur Ger\xe4te- sondern auch Brwoser gebunden ist, solltest du diese Seite JETZT in dem Browser \xf6ffnen, indem du vorhast, den Moneytracker auch k\xfcnftig zu verwenden."));u.append(m),e.append(l),e.append(o),e.append(u);let p=this.tGen.render_element("div",["circle-shapes","next-button","buttons","clickable"],["first-time-open-next-button"]);e.append(p),e.id="fOpen3";break;case"fOpen3":this.clearDOM(),e.append(this.tGen.render_masterHeadline());let g=this.tGen.render_element("div",["text-block","flex-column"]),k=this.tGen.render_textElement("p",this.Lang.lang("Mit der weiterf\xfchrenden Nutzung des Moneytrackers erkl\xe4rst du dich mit der Datennutzung einverstanden"));g.append(k);let y=this.tGen.render_element("div",["text-block","flex-column"]),M=this.tGen.render_textElement("p",this.Lang.lang("Um den Moneytracker zu nutzen, gib den Namen des deines ersten Tracker Accounts ein"));y.append(M),e.append(g),e.append(y),e.append(this.tGen.render_inputBlock("username-input","Namen eingeben...","Name eingeben","create-new-tracker-account-btn")),e.id="fOpen4"}else{let b=this.tGen.render_masterHeadline();e.append(b);let f=this.tGen.render_textBlock();f.classList.add("flex-column"),e.append(f);let E=this.tGen.render_textElement("h3","Select your language");f.append(E);let v=this.tGen.render_element("div",["flex-between"],["first-language-pick"]);f.append(v);let x=this.tGen.render_element("div",["germanBackground","clickable"]),L=this.tGen.render_element("div",["englishBackground","clickable"]);v.append(x),v.append(L);let G=this.tGen.render_textElement("h4","(you can change that anytime!)");f.append(G),e.setAttribute("id","fOpen1")}this.listener_firstOpen()}listener_starMenu(){let e=document.querySelectorAll(".sMenu-wrappers"),t=document.getElementById("sMenu-master-button");t&&t.addEventListener("click",n=>{t.classList.contains("not-clicked")?(t.classList.replace("not-clicked","clicked"),e.forEach(e=>{e.classList.replace("not-clicked","clicked")})):(t.classList.replace("clicked","not-clicked"),e.forEach(e=>{e.classList.replace("clicked","not-clicked")}))}),e[1].addEventListener("click",this.render_singleMenu.bind(this)),e[2].addEventListener("click",this.render_repeatingMenu.bind(this)),e[3].addEventListener("click",this.render_categories.bind(this)),e[4].addEventListener("click",this.render_accounts.bind(this))}listener_firstOpen(){let e=document.querySelector("main");switch(e.getAttribute("id")){case"fOpen1":let t=e.querySelector(".germanBackground"),n=e.querySelector(".englishBackground");t.addEventListener("click",()=>{localStorage.setItem("kamedin-moneytracker-language","de"),this.render_firstOpening()}),n.addEventListener("click",()=>{localStorage.setItem("kamedin-moneytracker-language","en"),this.render_firstOpening()});break;case"fOpen2":case"fOpen3":document.getElementById("first-time-open-next-button").addEventListener("click",this.render_firstOpening.bind(this));break;case"fOpen4":let a=document.getElementById("username-input"),i=document.getElementById("create-new-tracker-account-btn");document.querySelector(".input.int-p-holder > p"),i.addEventListener("click",t=>{let n=document.querySelector(".secondary-input");i.getAttribute("clicked")?(n.classList.remove("sec-outside"),n.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.createTrackeraccount(a.value.trim(),this.Lang.lang("Einkauf"),this.Lang.lang("Gehalt")),e.removeAttribute("id"),this.render_dashboard()):this.vali.validateUserName(a.value.trim(),void 0)&&(n.classList.remove("sec-inside"),n.classList.add("sec-outside"),i.setAttribute("clicked","one"))}),a.addEventListener("focus",()=>{this.resetInputButton("username-input","create-new-tracker-account-btn")})}}resetInputButton(e,t){document.getElementById(e);let n=document.getElementById(t),a=document.querySelector(".secondary-input");n.hasAttribute("clicked")&&(n.removeAttribute("clicked"),a.classList.remove("sec-outside"),a.classList.add("sec-inside"))}animateInputButton(e,t,n){let a=document.getElementById(t),i=document.getElementById(n),d=document.querySelector(".secondary-input");switch(e){case"username":i.addEventListener("click",()=>{i.getAttribute("clicked")?(d.classList.remove("sec-outside"),d.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.createTrackeraccount(a.value.trim(),this.Lang.lang("Einkauf"),this.Lang.lang("Gehalt")),this.render_dashboard()):this.vali.validateUserName(a.value.trim(),this.dMan.mydata.trackeraccounts)?(d.classList.remove("sec-inside"),d.classList.add("sec-outside"),i.setAttribute("clicked","one")):this.tGen.render_inputError("Ung\xfcltige Eingabe")});break;case"amount":if(i.getAttribute("clicked")){d.classList.remove("sec-outside"),d.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.set_singleTrans("amount",+a.value.replace(",",".").trim()),a.value="";let l=new r(this.dMan.singleTrans.type,this.dMan.singleTrans.date,this.dMan.singleTrans.category,this.dMan.singleTrans.amount,Date.now().toString().slice(4));this.dMan.add_singleTransaction(l,this.tMan.convert_YearAndMonth_to_monthId(this.dMan.singleTrans.date))}else this.vali.validateAmount(a.value.trim())?null===this.dMan.singleTrans.date?this.tGen.render_inputError("Datum w\xe4hlen"):(i.setAttribute("clicked","one"),d.classList.remove("sec-inside"),d.classList.add("sec-outside")):this.tGen.render_inputError("Ung\xfcltiger Betrag");break;case"repeatingAmount":if(i.getAttribute("clicked")){d.classList.remove("sec-outside"),d.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.set_multiTrans("amount",+a.value.replace(",",".").trim()),this.dMan.compute_monthlyAmount(),a.value="";let c=new s(this.dMan.multiTrans.type,this.dMan.multiTrans.due,this.dMan.multiTrans.category,this.dMan.multiTrans.amount,this.dMan.multiTrans.amountPerMonth,Date.now().toString().slice(4));this.dMan.add_multiTransaction(c,this.tMan.get_monthId())}else this.vali.validateAmount(a.value.trim())?(i.setAttribute("clicked","one"),d.classList.remove("sec-inside"),d.classList.add("sec-outside")):this.tGen.render_inputError("Ung\xfcltiger Betrag");break;case"category":i.getAttribute("clicked")?(d.classList.remove("sec-outside"),d.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.add_category(a.value.trim()),this.tGen.refresh_categoryBox(a.value.trim(),this.dMan),a.value=""):this.vali.validate_categoryName(a.value.trim(),this.dMan.mydata.trackeraccounts[this.dMan.monthArrayOfWho()].categories)?(i.setAttribute("clicked","one"),d.classList.remove("sec-inside"),d.classList.add("sec-outside")):this.tGen.render_inputError("Ung\xfcltige Eingabe");break;case"additional-username":if(i.getAttribute("clicked")){d.classList.remove("sec-outside"),d.classList.add("sec-inside"),i.removeAttribute("clicked"),this.dMan.createTrackeraccount(a.value.trim(),this.Lang.lang("Einkauf"),this.Lang.lang("Gehalt")),a.value="";let o=[];this.dMan.mydata.trackeraccounts.forEach(e=>{o.push(e.name)}),this.tGen.refresh_accountWrapper(o,this.dMan.mydata.activeTrackeraccount),this.listener_accounts(!0)}else this.vali.validateUserName(a.value.trim(),this.dMan.mydata.trackeraccounts)?(d.classList.remove("sec-inside"),d.classList.add("sec-outside"),i.setAttribute("clicked","one")):this.tGen.render_inputError("Ung\xfcltige Eingabe")}}clearDOM(){let e=document.querySelector("main");for(;e.children.length>0;)e.firstElementChild.remove()}}